// fileoperations.cpp : This file contains the 'main' function. Program execution begins and ends there.
//
#define _CRT_SECURE_NO_WARNINGS
/* fflush example */
#include <stdio.h>
#define BUFFER 1024
#define FILENAMESIZE 15

int main()
{
	char filename[FILENAMESIZE] = "\0";
	printf("Enter the output file name for not more than 14 characters\n");
	scanf("%s", filename);
	printf("\nThe filename is %s \n", filename);
	printf("Initiating File write, File write will continue until explicity broken pressing CTRL+C");
	char mytext[BUFFER]; // Alternatively we can use heap memory too
	FILE* fd = NULL;
	while (fread(mytext, sizeof(char), sizeof(mytext), stdin) > 0)
	{
		fd = fopen(filename, "ab+");
		if (fwrite(mytext, sizeof(char), sizeof(mytext), fd) < 0)
		{
			printf("Write FAILURE\n");
			fclose(fd);
			return 0;
		}
		fclose(fd);
	}
	fclose(fd);
	fflush(stdin);
}
